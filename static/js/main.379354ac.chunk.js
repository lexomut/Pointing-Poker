(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{101:function(e,t,a){e.exports={connect:"ConnectForm_connect__38UKm",connect__control:"ConnectForm_connect__control__OmsQe",highlight:"ConnectForm_highlight__kVvsk",btn:"ConnectForm_btn__RDsAA"}},154:function(e,t,a){e.exports={gameInfo:"GameInfo_gameInfo__6fY0r",icon:"GameInfo_icon__2XGO0"}},155:function(e,t,a){e.exports={scrumMaster:"ScrumMaster_scrumMaster__Eigul"}},19:function(e,t,a){e.exports={card:"gameCard_card__E4CpF",container:"gameCard_container__2wPeS",header:"gameCard_header__1tmAt",menuBtn:"gameCard_menuBtn__CRx6v",right:"gameCard_right__1Cabn",center:"gameCard_center__bciEQ",bgMountains:"gameCard_bgMountains__27HYZ",bgLeaf:"gameCard_bgLeaf__3pa3z",bgMoon:"gameCard_bgMoon__29hOC",bgEagle:"gameCard_bgEagle__O_MpI",coffee:"gameCard_coffee__2Q3q1",demo:"gameCard_demo__1hlTn",current:"gameCard_current__3i38F"}},197:function(e,t,a){e.exports={issueBtn:"IssueButton_issueBtn__1Ts9F"}},202:function(e,t,a){e.exports={time:"timer_time__24Exl"}},210:function(e,t,a){e.exports={modal:"invitation_modal__Ay8QZ",buttons:"invitation_buttons__1BXcF",top:"invitation_top__122On",registration:"invitation_registration__21Ely",inputs:"invitation_inputs__2ZQMF",btn:"invitation_btn__2eq5w",upload:"invitation_upload__3m1-g",upload__buttons:"invitation_upload__buttons__3jAwx",SwitchContainer:"invitation_SwitchContainer__3iC9a"}},214:function(e,t,a){e.exports={cancelAlert:"CancelButton_cancelAlert__34NrR"}},217:function(e,t,a){e.exports={linkToLobby:"LinkToLobby_linkToLobby__33bG6",linkToLobby__controls:"LinkToLobby_linkToLobby__controls__UQqol",linkToLobby__controls__url:"LinkToLobby_linkToLobby__controls__url__Yfiq4"}},219:function(e,t,a){e.exports={new_session:"NewSession_new_session__3Dwvb"}},222:function(e,t,a){e.exports={content:"style_content__3grKH"}},302:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(18),s=a.n(c),i=a(33),o=a(10),l=a(20),u=a(223),d=a(328),b=a(73),j=a.n(b),m=[{id:"1",name:"Alexey Pirozerskiy",link:"https://github.com/lexomut"},{id:"2",name:"LenarFF",link:"https://github.com/LenarFF"},{id:"3",name:"Olga Kitel",link:"https://github.com/OKitel"}],p=[{id:"1",value:"1"},{id:"2",value:"2"},{id:"3",value:"3"},{id:"4",value:"5"},{id:"5",value:"8"},{id:"6",value:"13"},{id:"7",value:"21"},{id:"8",value:"34"},{id:"9",value:"55"},{id:"10",value:"89"}],h=[{id:"1",value:"2"},{id:"2",value:"4"},{id:"3",value:"8"},{id:"4",value:"16"},{id:"5",value:"32"},{id:"6",value:"64"},{id:"7",value:"128"},{id:"8",value:"256"}],O=[{id:"1",class:"bgMountains"},{id:"2",class:"bgMoon"},{id:"3",class:"bgEagle"},{id:"4",class:"bgLeaf"}],x=a(192),v=a.n(x),f=a(1);function g(e){var t=e.author,a=t.name,r=t.link;return Object(f.jsxs)("a",{className:j.a.github,href:r,target:"_blank",rel:"noreferrer",children:[Object(f.jsx)(v.a,{}),Object(f.jsx)("span",{children:a})]})}var _=function(){return Object(f.jsx)("footer",{className:j.a.footer,children:Object(f.jsxs)("div",{className:j.a.footerContainer,children:[m.map((function(e){return Object(f.jsx)(g,{author:e},e.id)})),Object(f.jsx)("a",{className:j.a.rss,href:"https://rs.school/react/",target:"_blank",rel:"noreferrer",children:Object(f.jsx)("span",{className:j.a.rssYear,children:"'21"})})]})})},y=a(349),k=a(336),C=a(5),w=a(8),S=a.n(w),N=a(13),I=a(3),D=a(331),U=a(335),F=a(334),P=a(157),G=a(326),L=a(225),T=a(352),A=a(339),E=a(329),R=a(51),M=a.n(R),V=a(348),B=a(198),z=a.n(B),K={ws:{status:!1,provider:void 0},popup:"",chatOpen:!1,temporaryDialerSettings:{gameSettings:{dealerIsPlaying:!1,scoreType:"",shortScoreType:"",isTimerNeeded:!1,changingCardInRoundEnd:!1},cards:[],cartBackClass:"bgMountains"},currentUser:{userID:"",firstName:"Alex",lastName:"Pirozerskiy",roleInGame:"player",jobPosition:"junior",initials:"AP"},game:{title:"",chatMessages:[],gameID:void 0,users:[],status:"new",startTimer:void 0,cartBackClass:"bgMountains",kickedUsersID:[],vote:void 0,pendingUsers:[],statistic:[],dealer:{userID:"",firstName:"",lastName:"",roleInGame:"player",jobPosition:"",initials:""},issues:[],cards:[],selectedCards:[{card:{id:"123",value:"1"},user:{userID:"3434",firstName:"Alex",lastName:"Pirozerskiy",roleInGame:"player",jobPosition:"junior",initials:"AP"}}],gameSettings:{dealerIsPlaying:!1,scoreType:"",shortScoreType:"",isTimerNeeded:!1,changingCardInRoundEnd:!1},round:{issueID:"",roundID:"",status:"pending"}}},Y=n.a.createContext({globalState:K,dispatch:function(){}}),q="addChatMessage",H="setSocket",Q="setSocketStatus",J="addWSProviderToGlobalState",W="setGame",X="setCurrentUser",Z="initGame",$="setPopup",ee="showChat",te="setGameTemporarySettings",ae=a(197),re=a.n(ae),ne=function(){var e=Object(r.useContext)(Y).dispatch;return Object(f.jsx)(G.a,{className:re.a.issueBtn,color:"secondary",variant:"contained",onClick:function(){e({type:$,payLoad:"createIssue"})},endIcon:Object(f.jsx)(z.a,{}),children:"create new issue"})},ce=a(199),se=a(330),ie=a(200),oe=a.n(ie),le=a(19),ue=a.n(le),de=a(30),be=a.n(de),je=a(45),me=a.n(je),pe=a(59),he=a.n(pe),Oe=a(31),xe=a.n(Oe),ve=function(e){var t=e.id,a=Object(r.useContext)(Y),n=a.globalState,c=a.dispatch,s=Object(r.useState)((n.temporaryDialerSettings.cards.find((function(e){return e.id===t}))||{value:""}).value),i=Object(o.a)(s,2),l=i[0],u=i[1],d=function(){var e=Object(N.a)(S.a.mark((function e(a){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),r=n.temporaryDialerSettings.cards.map((function(e){return e.id===t?Object(C.a)(Object(C.a)({},e),{},{value:l}):e})),c({type:te,payLoad:{property:"cards",value:r}}),c({type:$,payLoad:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:d,className:xe.a.modal,children:[Object(f.jsxs)("div",{className:xe.a.registration,children:[Object(f.jsx)("div",{className:xe.a.top,children:Object(f.jsx)("h2",{children:"Edit Card"})}),Object(f.jsx)("div",{className:xe.a.inputs,children:Object(f.jsxs)(me.a,{htmlFor:"value",children:["Value:",Object(f.jsx)(he.a,{required:!0,value:l,onChange:function(e){return u(e.target.value)},id:"filled-error-helper-text",type:"text",name:"value",variant:"outlined"})]})})]}),Object(f.jsxs)("div",{className:xe.a.buttons,children:[Object(f.jsx)(be.a,{color:"primary",className:xe.a.btn,type:"submit",variant:"contained",children:"Confirm"}),Object(f.jsx)(be.a,{color:"primary",className:xe.a.btn,variant:"outlined",onClick:function(){return c({type:$,payLoad:""})},children:"Cancel"})]})]})},fe=function(e){var t=Object(r.useContext)(Y),a=t.globalState,c=t.dispatch,s=e.id,i=n.a.useState(null),l=Object(o.a)(i,2),u=l[0],d=l[1],b=Boolean(u);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(E.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},className:ue.a.menuBtn,children:Object(f.jsx)(oe.a,{})}),Object(f.jsxs)(ce.a,{id:"long-menu",anchorEl:u,keepMounted:!0,open:b,onClose:function(){d(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}},children:[Object(f.jsx)(se.a,{onClick:function(){c({type:$,payLoad:"editCard"}),d(null)},children:"Edit"}),Object(f.jsx)(se.a,{onClick:function(){var e=a.temporaryDialerSettings.cards.filter((function(e){return e.id!==s}));c({type:te,payLoad:{property:"cards",value:e}})},children:"Delete"})]}),Object(f.jsx)(y.a,{open:"editCard"===a.popup,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)(ve,{id:s})})]})},ge=Object(D.a)((function(e){return{activeCard:function(t){return{backgroundColor:t.isActiveCard?e.palette.secondary.main:e.palette.background.default,transform:t.isActiveCard?"scale(1.1)":"scale(1)"}}}})),_e=function(e){var t=e.isActiveCard,a=ge(e),r=e.value,n=e.scoreType,c=e.isEditable,s=e.onClick,i=e.id;return Object(f.jsx)(L.a,{elevation:t?9:3,className:ue.a.card,classes:{root:a.activeCard},onClick:function(){return s&&s()},children:Object(f.jsxs)("div",{className:ue.a.container,children:[Object(f.jsxs)("div",{className:ue.a.header,children:[Object(f.jsx)(P.a,{className:ue.a.left,variant:"subtitle1",children:n}),c&&Object(f.jsx)(fe,{id:i})]}),Object(f.jsx)(P.a,{className:ue.a.center,variant:"h2",children:r}),Object(f.jsx)(P.a,{className:ue.a.right,variant:"subtitle1",children:n})]})})};_e.defaultProps={onClick:function(){}};var ye=function(e){var t=Object(r.useContext)(Y),a=t.globalState,n=t.dispatch,c=e.back;return Object(f.jsx)("div",{className:a.temporaryDialerSettings.cartBackClass===c?ue.a.current:"",children:Object(f.jsx)(L.a,{onClick:function(){n({type:te,payLoad:{property:"cartBackClass",value:c}})},elevation:3,className:Object(I.default)(ue.a.card,ue.a[c])})})},ke=a(54),Ce=a.n(ke),we=Object(D.a)((function(e){return{activeCard:function(t){return{backgroundColor:t.isActiveCard?e.palette.secondary.main:e.palette.background.default,transform:t.isActiveCard?"scale(1.1)":"scale(1)"}}}})),Se=function(){var e,t=Object(r.useContext)(Y).globalState,a=Object(r.useState)(""),n=Object(o.a)(a,2),c=n[0],s=n[1],i=we({isActiveCard:""===c}),l=t.game.cards,u=t.game.gameSettings,d=u.shortScoreType;switch(u.cardsDeckType){default:e=p;break;case"powersOfTwo":e=h;break;case"custom":e=l}var b=function(){var e=Object(N.a)(S.a.mark((function e(a){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(a.id),"going"!==t.game.status){e.next=4;break}return e.next=4,null===(r=t.ws.provider)||void 0===r?void 0:r.sendChooseCard(a);case 4:s(a.id);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:ue.a.demo,children:[e.map((function(e){return Object(f.jsx)(_e,{isActiveCard:e.id===c,value:e.value,isEditable:!1,scoreType:d,onClick:function(){b(e)},id:e.id},e.id)})),Object(f.jsx)(L.a,{elevation:c?3:9,className:ue.a.card,classes:{root:i.activeCard},onClick:function(){s(""),b({id:"",value:"cup"})},children:Object(f.jsx)(Ce.a,{className:ue.a.coffee})})]})},Ne=a(350),Ie=a(333),De=a(332),Ue=function(e){var t=e.name,a=n.a.useState(!1),r=Object(o.a)(a,2),c=r[0],s=r[1],i=function(){s(!1)};return Object(f.jsx)("div",{children:Object(f.jsxs)(Ne.a,{open:c,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(f.jsx)(De.a,{id:"alert-dialog-title",children:"".concat(t," wants to connect to this game")}),Object(f.jsxs)(Ie.a,{children:[Object(f.jsx)(G.a,{onClick:i,color:"primary",children:"Disagree"}),Object(f.jsx)(G.a,{onClick:i,color:"primary",autoFocus:!0,children:"Agree"})]})]})})},Fe=a(55),Pe=a.n(Fe);function Ge(e){var t=e.map((function(e){return e.card?e.card.value:"?"})),a=t.reduce((function(e,t){var a=e,r=t;return a[r]=a[r]+1||1,a}),{});return Object.entries(a).map((function(e){var a=e[0],r=e[1];return{id:"cup"===a?"":(new Date).getTime().toString(36)+Math.random().toString(36).slice(2),value:a,voteResult:"".concat(Math.ceil(r/t.length*100),"%")}}))}var Le=function(){var e=Object(r.useContext)(Y).globalState,t=e.game.selectedCards;return Object(f.jsx)("div",{className:Pe.a.demo,children:Ge(t).map((function(t){return Object(f.jsx)("div",{className:Pe.a.container,children:t.id?Object(f.jsxs)(f.Fragment,{children:[" ",Object(f.jsx)(_e,{isActiveCard:!1,value:t.value,isEditable:!1,scoreType:e.game.gameSettings.shortScoreType,id:t.id}),Object(f.jsx)(P.a,{variant:"subtitle1",children:t.voteResult})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(L.a,{elevation:3,className:Pe.a.card,children:Object(f.jsx)(Ce.a,{className:Pe.a.coffee})}),Object(f.jsx)(P.a,{variant:"subtitle1",children:t.voteResult})]})},t.id)}))})},Te=a(50),Ae=a(201),Ee=a(202),Re=a.n(Ee),Me=function(e){var t=e.seconds,a=e.start,r=e.onComplete,n=Object(Te.a)();return Object(f.jsx)(Ae.CountdownCircleTimer,{isPlaying:a,size:110,strokeWidth:10,colors:[[n.palette.primary.main,.25],[n.palette.primary.light,.25],[n.palette.secondary.main,.25],[n.palette.primary.dark,.25]],duration:t,onComplete:function(){return r(),[!1,0]},children:function(e){var a,r,n=e.remainingTime;return a="seconds",r=null!==n&&void 0!==n?n:t,Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:Re.a.time,children:r}),Object(f.jsx)("div",{children:a})]})}})},Ve=a(29),Be=a(22),ze=a(351),Ke=a(203),Ye=a.n(Ke),qe=Object(D.a)((function(e){return{paper:function(e){return"large"===e.size?{width:250,height:60,boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",marginBottom:10,userSelect:"none"}:{width:180,height:45,boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",marginBottom:10,userSelect:"none"}},small:{width:e.spacing(4),height:e.spacing(4)},large:{width:e.spacing(5),height:e.spacing(5)},avatar:{background:"#60DABF",boxShadow:"inset 0px 4px 4px rgba(0, 0, 0, 0.25)",textShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",fontWeight:"bold",marginLeft:e.spacing(1)},title:function(e){return"large"===e.size?{fontSize:"1rem"}:{fontSize:"0.8rem"}},caption:function(e){return"large"===e.size?{fontSize:"0.8rem"}:{fontSize:"0.7rem"}},button:function(t){return"large"===t.size?{maxWidth:e.spacing(6),minWidth:e.spacing(6),maxHeight:e.spacing(6),minHeight:e.spacing(6),fontSize:"1.5rem"}:{maxWidth:e.spacing(4),minWidth:e.spacing(4),maxHeight:e.spacing(4),minHeight:e.spacing(4),fontSize:"1rem"}},icon:function(e){return{fontSize:"large"===e.size?"1.5rem":"1rem"}},current:{backgroundColor:e.palette.secondary.main}}}));function He(e){var t,a,n=qe(e),c=e.name,s=e.jobPosition,i=e.size,o=e.imgSrc,l=e.initials,u=e.currentUser,d=e.userID,b=e.roleInGame,j=Object(r.useContext)(Y).globalState,m=j.ws,p=j.game,h=function(){var e=Object(N.a)(S.a.mark((function e(){var t,a,r,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("dealer"!==j.currentUser.roleInGame){e.next=8;break}return e.next=3,null===(t=m.provider)||void 0===t?void 0:t.changeValueOfGameProperty("kickedUsersID",[].concat(Object(Be.a)(p.kickedUsersID),[d]));case 3:return r=p.users.filter((function(e){return e.userID!==d})),e.next=6,null===(a=m.provider)||void 0===a?void 0:a.changeValueOfGameProperty("users",r);case 6:e.next=14;break;case 8:if(!p.vote){e.next=10;break}return e.abrupt("return");case 10:if(!(p.users.length<4)){e.next=13;break}return alert("player less then 3"),e.abrupt("return");case 13:null===(n=m.provider)||void 0===n||n.changeValueOfGameProperty("vote",{author:j.currentUser,yes:1,no:0,kickID:d,votedUsersID:[j.currentUser.userID]});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(L.a,{className:Object(I.default)(n.paper,Object(Ve.a)({},n.current,u)),children:Object(f.jsxs)(F.a,{container:!0,spacing:1,alignItems:"center",wrap:"nowrap",children:[Object(f.jsx)(F.a,{item:!0,children:o?Object(f.jsx)(ze.a,{className:Object(I.default)(n.avatar,(t={},Object(Ve.a)(t,n.large,"large"===i),Object(Ve.a)(t,n.small,"small"===i),t)),src:o,alt:c,children:l}):Object(f.jsx)(ze.a,{className:Object(I.default)(n.avatar,(a={},Object(Ve.a)(a,n.large,"large"===i),Object(Ve.a)(a,n.small,"small"===i),a)),children:l})}),Object(f.jsxs)(F.a,{item:!0,xs:12,sm:!0,container:!0,alignItems:"center",children:[Object(f.jsx)(F.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:1,children:Object(f.jsxs)(F.a,{item:!0,xs:!0,children:[Object(f.jsx)(P.a,{variant:"h6",className:n.title,children:c}),Object(f.jsx)(P.a,{variant:"caption",color:"textSecondary",className:n.caption,children:s})]})}),Object(f.jsx)(F.a,{item:!0,children:(!(u||j.game.vote||"dealer"===b)||"dealer"===j.currentUser.roleInGame&&"dealer"!==b)&&Object(f.jsx)(G.a,{className:n.button,"aria-label":"kick",onClick:function(){return h()},children:Object(f.jsx)(Ye.a,{className:n.icon})})})]})]})})}He.defaultProps={imgSrc:void 0,currentUser:!1};var Qe=a(76),Je=a.n(Qe),We=function(e){var t=Object(r.useContext)(Y).globalState,a=e.user,n=function(){var e=Object(N.a)(S.a.mark((function e(){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.ws.provider)||void 0===r?void 0:r.changeValueOfGameProperty("pendingUsers",Object(Be.a)(t.game.pendingUsers.filter((function(e){return e.userID!==a.userID}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.game.users.some((function(e){return e.userID===a.userID}))&&n();var c=function(){var e=Object(N.a)(S.a.mark((function e(){var r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(r=t.ws.provider)||void 0===r?void 0:r.changeValueOfGameProperty("users",[].concat(Object(Be.a)(t.game.users),[a]));case 2:return e.next=4,n();case 4:return e.next=6,null===(c=t.ws.provider)||void 0===c?void 0:c.changeValueOfGameProperty("selectedCards",[].concat(Object(Be.a)(t.game.selectedCards),[{card:void 0,user:a}]));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(N.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t.game.gameSettings.freeGameEnter&&c(),Object(f.jsxs)("form",{onSubmit:s,className:Je.a.modal,children:[Object(f.jsx)("div",{className:Je.a.registration,children:Object(f.jsx)("div",{className:Je.a.top,children:Object(f.jsx)("h2",{children:"Let in user"})})}),Object(f.jsx)("h4",{children:"let the user ".concat(a.firstName," into the game")}),Object(f.jsxs)("div",{className:Je.a.buttons,children:[Object(f.jsx)(be.a,{color:"primary",className:Je.a.btn,type:"submit",variant:"contained",children:"let in user"}),Object(f.jsx)(be.a,{color:"primary",className:Je.a.btn,variant:"outlined",onClick:function(){var e;null===(e=t.ws.provider)||void 0===e||e.changeValueOfGameProperty("kickedUsersID",[].concat(Object(Be.a)(t.game.kickedUsersID),[a.userID])),n()},children:"Kick him/her"})]})]})},Xe=a(340),Ze=a(341),$e=a(206),et=a.n($e),tt=a(205),at=a.n(tt),rt=a(337),nt=a(338),ct=a(204),st=a.n(ct),it=Object(D.a)((function(e){return Object(U.a)({root:{minWidth:250,width:250,boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",marginBottom:10},cardContainer:{position:"relative",padding:0,paddingLeft:5},button:{position:"absolute",top:5,right:0},title:{lineHeight:1},caption:{fontSize:"0.6rem"},current:{background:e.palette.secondary.main},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},link:{wordWrap:"break-word"},mt:{marginTop:10}})})),ot=function(e){var t=e.name,a=e.current,n=e.priority,c=e.dealer,s=e.id,i=e.link,l=e.score,u=e.isRoundGoing,d=it(),b=Object(r.useState)(!1),j=Object(o.a)(b,2),m=j[0],p=j[1],h=Object(r.useState)(l),O=Object(o.a)(h,2),x=O[0],v=O[1],g=Object(r.useContext)(Y).globalState;return Object(f.jsxs)(k.a,{className:Object(I.default)(d.root,Object(Ve.a)({},d.current,a)),variant:"outlined",children:[Object(f.jsxs)(rt.a,{className:d.cardContainer,children:[Object(f.jsx)(P.a,{className:d.caption,variant:"caption",color:"textSecondary",children:a?"CURRENT":"\u2001"}),Object(f.jsx)(P.a,{variant:"h6",className:d.title,children:t}),Object(f.jsxs)(P.a,{color:"textSecondary",variant:"caption",className:d.caption,children:[n," priority"]}),Object(f.jsxs)(nt.a,{className:d.button,disableSpacing:!0,children:[c&&!a&&Object(f.jsx)(G.a,{disabled:!g.ws.status,onClick:function(){var e,t=g.game.issues.filter((function(e){return s!==e.id}));null===(e=g.ws.provider)||void 0===e||e.changeValueOfGameProperty("issues",t)},children:Object(f.jsx)(M.a,{})}),Object(f.jsx)(E.a,{className:Object(I.default)(d.expand,Object(Ve.a)({},d.expandOpen,m)),onClick:function(){p(!m)},"aria-expanded":m,"aria-label":"show more",children:Object(f.jsx)(st.a,{})})]})]}),Object(f.jsx)(A.a,{in:m,timeout:"auto",unmountOnExit:!0,children:Object(f.jsxs)(rt.a,{children:[Object(f.jsx)(P.a,{variant:"subtitle1",children:"Link:"}),Object(f.jsx)(Xe.a,{href:i,target:"_blank",className:d.link,children:i}),Object(f.jsx)(Ze.a,{className:d.mt,id:"outlined-read-only-input",label:"Score:",value:x,onChange:function(e){return v(e.target.value||"")},InputProps:{readOnly:!c,endAdornment:Object(f.jsx)(G.a,{color:"primary",variant:"outlined",onClick:function(){var e,t=g.game.issues.map((function(e){return e.id===s?Object(C.a)(Object(C.a)({},e),{},{score:x}):e}));c&&(null===(e=g.ws.provider)||void 0===e||e.changeValueOfGameProperty("issues",t))},endIcon:Object(f.jsx)(at.a,{}),children:"Save"})}}),Object(f.jsx)(G.a,{className:d.mt,color:"primary",variant:"outlined",onClick:function(){var e,t=g.game.issues.map((function(e){return Object(C.a)(Object(C.a)({},e),{},{current:e.id===s})}));c&&(null===(e=g.ws.provider)||void 0===e||e.changeValueOfGameProperty("issues",t))},endIcon:Object(f.jsx)(et.a,{}),disabled:u,children:"Set as current issue"})]})})]})};ot.defaultProps={current:!1,dealer:!1};var lt=a(99),ut=a.n(lt),dt=a(98),bt=a.n(dt),jt=a(67),mt=a.n(jt),pt=function(){var e=Object(r.useContext)(Y),t=e.globalState,a=e.dispatch,n=Object(r.useState)({name:"",link:"",priority:"Medium",id:(new Date).getTime().toString(36)+Math.random().toString(36).slice(2),dealer:!0,score:"-",current:0===t.game.issues.length}),c=Object(o.a)(n,2),s=c[0],i=c[1],l=function(){var e=Object(N.a)(S.a.mark((function e(r){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,null===(n=t.ws.provider)||void 0===n?void 0:n.changeValueOfGameProperty("issues",[].concat(Object(Be.a)(t.game.issues),[s]));case 3:a({type:$,payLoad:""});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:l,className:mt.a.modal,children:[Object(f.jsxs)("div",{className:mt.a.registration,children:[Object(f.jsx)("div",{className:mt.a.top,children:Object(f.jsx)("h2",{children:"Create Issue"})}),Object(f.jsxs)("div",{className:mt.a.inputs,children:[Object(f.jsxs)(me.a,{htmlFor:"name",children:["Title:",Object(f.jsx)(he.a,{required:!0,value:s.name,onChange:function(e){return i(Object(C.a)(Object(C.a)({},s),{},{name:e.target.value}))},id:"filled-error-helper-text",type:"text",name:"name",variant:"outlined",inputProps:{maxLength:10}})]}),Object(f.jsxs)(me.a,{htmlFor:"link",children:["Link:",Object(f.jsx)(he.a,{required:!0,value:s.link,onChange:function(e){return i(Object(C.a)(Object(C.a)({},s),{},{link:e.target.value}))},id:"filled-error-helper-text",type:"text",name:"link",variant:"outlined"})]}),Object(f.jsxs)(me.a,{id:"priority",children:["Priority",Object(f.jsx)(bt.a,{labelId:"priority",id:"filled-error-helper-text",value:s.priority,onChange:function(e){i(Object(C.a)(Object(C.a)({},s),{},{priority:e.target.value}))},variant:"outlined",children:["Critical","High","Medium","Low"].map((function(e){return Object(f.jsx)(ut.a,{value:e,children:e},e)}))})]})]})]}),Object(f.jsxs)("div",{className:mt.a.buttons,children:[Object(f.jsx)(be.a,{disabled:!t.ws.status,color:"primary",className:mt.a.btn,type:"submit",variant:"contained",children:"Confirm"}),Object(f.jsx)(be.a,{color:"primary",className:mt.a.btn,variant:"outlined",onClick:function(){return a({type:$,payLoad:""})},children:"Cancel"})]})]})};var ht=Object(D.a)((function(e){return Object(U.a)({mainContainer:{color:e.palette.primary.dark},rightBorder:{borderRight:"2px solid ".concat(e.palette.primary.dark)},column:{flexDirection:"column"},bottomSpace:{marginBottom:20},topSpace:{marginTop:40},minWidth:{minWidth:125,cursor:"default"},rightContainer:{height:"50%"},minimize:{transform:"scale(0.7)"}})})),Ot=function(){var e=Object(r.useContext)(Y).globalState,t=e.game,a="dealer"===e.currentUser.roleInGame,n="observer"===e.currentUser.roleInGame,c=ht(),s=Object(r.useState)(0),i=Object(o.a)(s,2),u=i[0],d=i[1],b=Object(r.useState)(!1),j=Object(o.a)(b,2),m=j[0],p=j[1],h=Object(r.useState)(!1),O=Object(o.a)(h,2),x=O[0],v=O[1],g=Object(r.useState)([]),_=Object(o.a)(g,2),k=_[0],w=_[1];Object(r.useEffect)((function(){var t=e.ws.provider;null===t||void 0===t||t.updateProviderState(e),e.ws.socket||null===t||void 0===t||t.connects()}),[e]);var D=Object(l.g)(),U=function(){D.push("/")},R=function(){var t=Object(N.a)(S.a.mark((function t(){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(a=e.ws.provider)||void 0===a?void 0:a.changeValueOfGameProperty("statistic",k);case 2:setTimeout((function(){return D.push("/".concat(e.game.gameID,"/result"))}),1e3);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=t.round,z=function(){var r=Object(N.a)(S.a.mark((function r(){var n;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,null===(n=e.ws.provider)||void 0===n?void 0:n.changeValueOfGameProperty("selectedCards",t.users.map((function(e){return{card:void 0,user:e}})));case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=function(){var e=Object(N.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("going"!==t.round.status){e.next=4;break}return p(!0),v(!1),e.abrupt("return");case 4:if("over"!==t.round.status||x){e.next=8;break}return v(!0),p(!1),e.abrupt("return");case 8:"pending"===t.round.status&&(v(!1),p(!1));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[e,t,p,m,x,v]),Object(r.useEffect)((function(){w(function(e,t,a){var r=e.find((function(e){return e.current}));if(r){var n=Object(Be.a)(t),c=Ge(a),s=n.findIndex((function(e){return e.issue.id===r.id}));return s>=0?n[s]={issue:r,statisticCards:c}:t.push({issue:r,statisticCards:c}),n}return[]}(t.issues,t.statistic,t.selectedCards))}),[t.issues,t.statistic,t.selectedCards,w]);var K=Object(r.useState)(!1),q=Object(o.a)(K,2),H=q[0],Q=q[1],J=t.users.find((function(e){return"dealer"===e.roleInGame})),W=t.issues,X=e.game.gameSettings.dealerIsPlaying,Z=t.gameSettings,$=Z.isTimerNeeded,ee=Z.timer,te=function(){var t=Object(N.a)(S.a.mark((function t(){var a,r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,null===(a=e.ws.provider)||void 0===a?void 0:a.changeValueOfGameProperty("round",Object(C.a)(Object(C.a)({},B),{},{status:"going"}));case 2:return t.next=4,null===(r=e.ws.provider)||void 0===r?void 0:r.changeValueOfGameProperty("status","going");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ae=function(){var t=Object(N.a)(S.a.mark((function t(){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,null===(r=e.ws.provider)||void 0===r?void 0:r.changeValueOfGameProperty("round",Object(C.a)(Object(C.a)({},B),{},{status:"over"}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),re=function(){var t=Object(N.a)(S.a.mark((function t(){var r,n,c,s,i;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!1,n=!1,c=W.map((function(e){return e.current?(r=!0,Object(C.a)(Object(C.a)({},e),{},{current:!1})):r&&"-"===e.score&&!n?(n=!0,Object(C.a)(Object(C.a)({},e),{},{current:!0})):e})),n||(c=c.map((function(e){return"-"!==e.score||n?e:(n=!0,Object(C.a)(Object(C.a)({},e),{},{current:!0}))}))),!n){t.next=17;break}if(!a){t.next=10;break}return t.next=8,null===(s=e.ws.provider)||void 0===s?void 0:s.changeValueOfGameProperty("issues",c);case 8:return t.next=10,null===(i=e.ws.provider)||void 0===i?void 0:i.changeValueOfGameProperty("round",Object(C.a)(Object(C.a)({},B),{},{status:"pending"}));case 10:z(),Q(!1),v(!1),d((function(e){return e+1})),p(!1),t.next=18;break;case 17:Q(!0);case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ce=function(r){return a||r.user.userID===e.currentUser.userID||x?r.card?"".concat(r.card.value," ").concat(t.gameSettings.shortScoreType):"undefined":"in pogress"};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(F.a,{container:!0,className:c.mainContainer,children:[Object(f.jsxs)(F.a,{item:!0,container:!0,alignItems:"center",justifyContent:"space-between",xs:12,sm:5,md:8,lg:9,xl:10,className:Object(I.default)(c.rightBorder,c.column),children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(P.a,{variant:"h4",children:t.title})}),Object(f.jsxs)(F.a,{item:!0,container:!0,alignItems:"center",spacing:10,justifyContent:"center",children:[Object(f.jsxs)(F.a,{item:!0,children:[Object(f.jsx)(P.a,{variant:"caption",children:"Scrum master:"}),J?Object(f.jsx)(He,{size:"large",initials:J.initials,userID:J.userID,name:"".concat(J.firstName," ").concat(J.lastName),jobPosition:J.jobPosition||"",currentUser:e.currentUser.userID===J.userID,roleInGame:"dealer"}):Object(f.jsx)(P.a,{variant:"h6",children:"Loading..."})]}),Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(G.a,{color:"primary",variant:"outlined",onClick:function(){return a?function(e,t){var a;null===(a=e.ws.provider)||void 0===a||a.changeValueOfGameProperty("status","over"),t()}(e,R):function(e,t){var a;null===(a=e.ws.provider)||void 0===a||a.changeValueOfGameProperty("users",Object(Be.a)(e.game.users.filter((function(t){return t.userID!==e.currentUser.userID})))),t()}(e,U)},children:a?"Stop game":"Exit game"})})]}),Object(f.jsxs)(F.a,{container:!0,className:c.bottomSpace,children:[Object(f.jsxs)(F.a,{container:!0,item:!0,className:c.column,alignItems:"center",spacing:1,xs:6,children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(P.a,{variant:"h6",children:"Issues:"})}),W.map((function(e){return Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(ot,{id:e.id,name:e.name,priority:e.priority,current:e.current,dealer:a,score:e.score,link:e.link,isRoundGoing:"going"===t.round.status})},e.id)})),a&&Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(ne,{})}),"over"===t.round.status&&a&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(P.a,{variant:"h6",children:"Statistics:"})}),Object(f.jsx)(F.a,{item:!0,container:!0,justifyContent:"center",children:Object(f.jsx)(Le,{})})]})]}),($||a)&&Object(f.jsx)(F.a,{item:!0,className:c.topSpace,xs:12,sm:12,md:3,children:Object(f.jsx)(L.a,{elevation:3,children:Object(f.jsx)(T.a,{p:3,children:Object(f.jsxs)(F.a,{container:!0,spacing:2,alignItems:"center",className:c.column,children:[Object(f.jsx)(A.a,{in:m&&!x,children:Object(f.jsx)(V.a,{severity:"success",children:"Round in progress. Waiting for players vote..."})}),Object(f.jsx)(A.a,{in:H,children:Object(f.jsx)(V.a,{severity:"success",action:Object(f.jsx)(E.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){Q(!1)},children:Object(f.jsx)(M.a,{fontSize:"inherit"})}),children:"All issues were discussed. There is no next issue."})}),$&&Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(Me,{seconds:ee,start:m,onComplete:ae},u)}),!m&&!x&&a&&Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(G.a,{color:"primary",variant:"contained",onClick:te,disabled:0===W.length,children:"Run round"})}),x&&a&&Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(G.a,{color:"primary",variant:"contained",onClick:function(){v(!1),d((function(e){return e+1})),z(),te()},children:"Restart round"})}),x&&a&&Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(G.a,{color:"primary",variant:"contained",onClick:re,children:"Next Issue"})})]})})})}),!a&&"over"===t.round.status&&Object(f.jsxs)(F.a,{item:!0,container:!0,justifyContent:"center",children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(P.a,{variant:"h6",children:"Statistics:"})}),Object(f.jsx)(F.a,{item:!0,container:!0,justifyContent:"center",className:c.minimize,children:Object(f.jsx)(Le,{})})]}),(!a||X)&&!n&&Object(f.jsx)(F.a,{item:!0,container:!0,justifyContent:"center",children:Object(f.jsx)(Se,{})})]})]}),Object(f.jsxs)(F.a,{item:!0,container:!0,xs:12,sm:7,md:4,lg:3,xl:2,className:c.rightContainer,children:[Object(f.jsxs)(F.a,{item:!0,container:!0,justifyContent:"space-around",children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(P.a,{variant:"subtitle1",children:"Score:"})}),Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(P.a,{variant:"subtitle1",children:"Participants:"})})]}),X&&Object(f.jsx)(F.a,{item:!0,container:!0,justifyContent:"center",children:Object(f.jsx)(P.a,{variant:"subtitle1",children:"Dealer"})}),X&&t.selectedCards.filter((function(e){return"dealer"===e.user.roleInGame})).map((function(e){return Object(f.jsxs)(F.a,{item:!0,container:!0,justifyContent:"space-around",children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(G.a,{color:"primary",variant:"outlined",className:c.minWidth,children:ce(e)})}),Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(He,{size:"small",initials:e.user.initials,userID:e.user.userID,name:"".concat(e.user.firstName," ").concat(e.user.lastName||""),jobPosition:e.user.jobPosition||"",roleInGame:e.user.roleInGame})})]},e.user.userID)})),Object(f.jsx)(F.a,{item:!0,container:!0,justifyContent:"center",children:Object(f.jsx)(P.a,{variant:"subtitle1",children:"Players"})}),t.selectedCards.filter((function(e){return"player"===e.user.roleInGame})).map((function(e){return Object(f.jsxs)(F.a,{item:!0,container:!0,justifyContent:"space-around",children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(G.a,{color:"primary",variant:"outlined",className:c.minWidth,children:ce(e)})}),Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(He,{size:"small",initials:e.user.initials,userID:e.user.userID,name:"".concat(e.user.firstName," ").concat(e.user.lastName||""),jobPosition:e.user.jobPosition||"",roleInGame:e.user.roleInGame})})]},e.user.userID)})),t.users.find((function(e){return"observer"===e.roleInGame}))&&Object(f.jsx)(F.a,{item:!0,container:!0,justifyContent:"center",children:Object(f.jsx)(P.a,{variant:"subtitle1",children:"Observers"})}),t.users.some((function(e){return"observer"===e.roleInGame}))&&t.selectedCards.filter((function(e){return"observer"===e.user.roleInGame})).map((function(e){return Object(f.jsxs)(F.a,{item:!0,container:!0,justifyContent:"space-around",children:[Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(G.a,{color:"primary",variant:"outlined",className:c.minWidth,children:ce(e)})}),Object(f.jsx)(F.a,{item:!0,children:Object(f.jsx)(He,{size:"small",initials:e.user.initials,userID:e.user.userID,name:"".concat(e.user.firstName," ").concat(e.user.lastName||""),jobPosition:e.user.jobPosition||"",roleInGame:e.user.roleInGame})})]},e.user.userID)}))]})]}),a&&Object(f.jsx)(Ue,{name:"Mike"}),Object(f.jsx)(y.a,{open:t.pendingUsers.length>0&&a,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)("div",{children:t.pendingUsers.map((function(e){return Object(f.jsx)(We,{user:e},e.userID)}))})}),Object(f.jsx)(y.a,{open:"createIssue"===e.popup,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)("div",{children:Object(f.jsx)(pt,{})})})]})},xt=a(208),vt=a.n(xt),ft=Object(D.a)({container:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",margin:50},link:{textDecoration:"none"}}),gt=function(){var e=ft();return Object(f.jsxs)("div",{className:e.container,children:[Object(f.jsxs)("h1",{children:["4",Object(f.jsx)(vt.a,{}),"4"]}),Object(f.jsx)("h2",{children:"PAGE NOT FOUND"}),Object(f.jsx)(i.b,{className:e.link,to:"/",children:"Main page"})]})},_t=a.p+"static/media/poker-planning.14acbaf0.svg",yt=a(77),kt=a.n(yt);function Ct(){var e=Object(l.i)().id,t=Object(r.useState)(!1),a=Object(o.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(o.a)(s,2),u=i[0],d=i[1];return Object(f.jsx)("div",{className:kt.a.main_page,children:Object(f.jsxs)("div",{className:kt.a.container,children:[Object(f.jsx)("img",{className:kt.a.poker_planning,src:_t,alt:"poker-planning"}),Object(f.jsxs)("section",{className:kt.a.content,children:[Object(f.jsx)("h3",{className:kt.a.start,children:"Start your planning:"}),Object(f.jsx)(or,{setIsDealer:d,setOpen:c}),Object(f.jsx)("h3",{className:kt.a.center,children:"OR:"}),Object(f.jsx)(cr,{id:e,open:n,isDealer:u,setIsDealer:d,setOpen:c})]})]})})}var wt=a(209),St=a.n(wt),Nt=a(36),It=a.n(Nt),Dt=function(){var e=Object(r.useContext)(Y).globalState,t=Object(l.g)(),a=e.game.pendingUsers.some((function(t){return e.currentUser.userID===t.userID}));Object(r.useEffect)((function(){var t=e.ws.provider;null===t||void 0===t||t.updateProviderState(e),e.ws.socket||null===t||void 0===t||t.connects()}),[e]),Object(r.useEffect)((function(){if(!e.game.kickedUsersID.some((function(t){return t===e.currentUser.userID}))&&!e.game.pendingUsers.some((function(t){return e.currentUser.userID===t.userID}))&&"new"!==e.game.status){var a;if(e.game.users.every((function(t){return e.currentUser.userID!==t.userID}))&&!e.game.users.some((function(t){return e.currentUser.userID===t.userID})))return void(null===(a=e.ws.provider)||void 0===a||a.changeValueOfGameProperty("pendingUsers",[].concat(Object(Be.a)(e.game.pendingUsers),[e.currentUser])));"canceled"!==e.game.status&&t.push("/".concat(e.game.gameID,"/game"))}}),[e.game.users,e.currentUser,e.game.gameID,e.game.kickedUsersID,e.game.pendingUsers,e.game.status,e.ws.provider,t]);var n=Object(r.useState)(!0),c=Object(o.a)(n,2),s=c[0],i=c[1];return Object(f.jsxs)("div",{className:It.a.lobby,children:[Object(f.jsxs)("div",{className:It.a.container,children:["dealer"!==e.currentUser.roleInGame&&Object(f.jsx)(A.a,{in:s,children:Object(f.jsx)(V.a,{action:Object(f.jsx)(E.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){i(!1)},children:Object(f.jsx)(M.a,{fontSize:"inherit"})}),icon:Object(f.jsx)(St.a,{fontSize:"inherit"}),severity:"success",children:"Welcome to Poker Planning lobby! You are waiting for game to start."})}),Object(f.jsxs)("section",{className:It.a.top,children:[Object(f.jsx)(wa,{}),Object(f.jsx)(La,{}),Object(f.jsx)(Ma,{}),"dealer"===e.currentUser.roleInGame&&Object(f.jsxs)("div",{className:It.a.top__buttons,children:[Object(f.jsx)(Va,{}),Object(f.jsx)(ja,{})]}),"dealer"!==e.currentUser.roleInGame&&Object(f.jsx)("div",{className:It.a.exitField,children:Object(f.jsx)(G.a,{variant:"outlined",color:"primary",onClick:Object(N.a)(S.a.mark((function a(){var r;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.push("/"),a.next=3,null===(r=e.ws.provider)||void 0===r?void 0:r.changeValueOfGameProperty("users",Object(Be.a)(e.game.users.filter((function(t){return t.userID!==e.currentUser.userID}))));case 3:case"end":return a.stop()}}),a)}))),className:It.a.exitBtn,children:"Exit"})})]}),Object(f.jsxs)("section",{className:It.a.members,children:[Object(f.jsx)("h4",{children:"Members"}),Object(f.jsx)(Ba,{classNames:It.a.members__cardField})]}),Object(f.jsxs)("section",{className:It.a.issues,children:[Object(f.jsx)("h4",{children:"Issues:"}),Object(f.jsx)(la,{classNames:It.a.issues__cardField})]}),"dealer"===e.currentUser.roleInGame&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("section",{className:It.a.settings,children:[Object(f.jsx)("h4",{children:"Game settings:"}),Object(f.jsx)(ga,{})]}),Object(f.jsxs)("section",{className:It.a.cards,children:[Object(f.jsx)("h4",{children:"Select cover:"}),Object(f.jsx)(Fa,{})]}),Object(f.jsxs)("section",{className:It.a.cards,children:[Object(f.jsx)("h4",{children:"Cards values:"}),Object(f.jsx)(Ua,{})]})]})]}),Object(f.jsx)(y.a,{open:"createIssue"===e.popup,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)("div",{children:Object(f.jsx)(pt,{})})}),Object(f.jsx)(y.a,{open:"createCard"===e.popup,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)("div",{children:Object(f.jsx)(ua,{})})}),Object(f.jsx)(y.a,{open:!(!e.game.vote||e.game.vote.kickID===e.currentUser.userID||!e.game.kickedUsersID.every((function(t){return t!==e.currentUser.userID})))&&e.game.vote.votedUsersID.every((function(t){return t!==e.currentUser.userID})),"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)("div",{children:Object(f.jsx)(dr,{})})}),Object(f.jsx)(y.a,{open:a,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:Object(f.jsx)("div",{children:Object(f.jsx)(k.a,{className:It.a.modal,children:Object(f.jsx)("h4",{children:"please wait until they let you in"})})})})]})},Ut=a(210),Ft=a.n(Ut),Pt=Object(D.a)((function(e){return Object(U.a)({root:{minWidth:250,width:250,height:60,boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",marginBottom:10},cardContainer:{position:"relative",padding:0,paddingLeft:5},button:{position:"absolute",top:5,right:0},title:{lineHeight:1},caption:{fontSize:"0.6rem"},current:{background:e.palette.secondary.main}})})),Gt=function(e){var t=Object(r.useContext)(Y).globalState,a=e.name,n=e.current,c=e.priority,s=e.dealer,i=e.id,o=Pt();return Object(f.jsx)(k.a,{className:Object(I.default)(o.root,Object(Ve.a)({},o.current,n)),variant:"outlined",children:Object(f.jsxs)(rt.a,{className:o.cardContainer,children:[Object(f.jsx)(P.a,{className:o.caption,variant:"caption",color:"textSecondary",children:n?"CURRENT":"\u2001"}),Object(f.jsx)(P.a,{variant:"h6",className:o.title,children:a}),Object(f.jsxs)(P.a,{color:"textSecondary",variant:"caption",className:o.caption,children:[c," priority"]}),s&&!n&&Object(f.jsx)(nt.a,{className:o.button,children:Object(f.jsx)(G.a,{disabled:!t.ws.status,onClick:function(){var e,a=t.game.issues.filter((function(e){return i!==e.id}));null===(e=t.ws.provider)||void 0===e||e.changeValueOfGameProperty("issues",a)},children:Object(f.jsx)(M.a,{})})})]})})};Gt.defaultProps={current:!1,dealer:!1};var Lt=a(224);var Tt=function(){var e=Object(r.useContext)(Y).globalState,t=Object(l.g)();return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(G.a,{color:"primary",variant:"outlined",onClick:function(){return function(e){var t=[];e.forEach((function(e){t.push([e.name,e.priority,e.link||"",e.score])})),Object(Lt.a)({data:t,fileName:"download",exportType:"csv"})}(e.game.issues)},children:"Save"}),Object(f.jsx)(G.a,{color:"primary",variant:"outlined",onClick:function(){return t.push("/")},children:"Go to main"}),e.game.statistic.map((function(t){var a=t.issue,r=t.statisticCards,n=a.name,c=a.priority,s=a.current,i=a.dealer,o=a.id;return Object(f.jsxs)("div",{children:[Object(f.jsx)(Gt,{name:n,priority:c,current:s,dealer:i,id:o},o),Object(f.jsx)("div",{className:Pe.a.demo,children:r&&r.map((function(t){return Object(f.jsx)("div",{className:Pe.a.container,children:t.id?Object(f.jsxs)(f.Fragment,{children:[" ",Object(f.jsx)(_e,{isActiveCard:!1,value:t.value,isEditable:!1,scoreType:e.game.gameSettings.shortScoreType,id:t.id}),Object(f.jsx)(P.a,{variant:"subtitle1",children:t.voteResult})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(L.a,{elevation:3,className:Pe.a.card,children:Object(f.jsx)(Ce.a,{className:Pe.a.coffee})}),Object(f.jsx)(P.a,{variant:"subtitle1",children:t.voteResult})]})},t.id)}))}),")"]},o)}))]})},At=function(){var e=Object(r.useContext)(Y).globalState,t=Object(l.g)(),a=Object(r.useState)(!1),n=Object(o.a)(a,2),c=n[0],s=n[1],i=Object(l.j)().path,u=e.game.kickedUsersID.some((function(t){return t===e.currentUser.userID})),d=!u;return u&&!c&&(s(!0),setTimeout((function(){return t.push("/")}),6e3)),Object(r.useEffect)((function(){"canceled"===e.game.status&&t.push("/")})),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{exact:!0,path:i,children:Object(f.jsx)(Ct,{})}),Object(f.jsx)(l.b,{exact:!0,path:"".concat(i,"/lobby"),children:d?Object(f.jsx)(Dt,{}):Object(f.jsx)(l.a,{to:"".concat(i,"/").concat(e.game.gameID)})}),Object(f.jsx)(l.b,{exact:!0,path:"".concat(i,"/game"),children:d?Object(f.jsx)(Ot,{}):Object(f.jsx)(l.a,{to:"/"})}),Object(f.jsx)(l.b,{exact:!0,path:"".concat(i,"/result"),children:Object(f.jsx)(Tt,{})}),Object(f.jsx)(l.b,{exact:!0,path:"*",children:Object(f.jsx)(gt,{})})]}),Object(f.jsx)(y.a,{open:u,"aria-labelledby":"parent-modal-title","aria-describedby":"parent-modal-description",children:Object(f.jsx)("div",{children:Object(f.jsx)(k.a,{className:Ft.a.modal,children:Object(f.jsx)("h4",{children:"YOU WERE KICKED"})})})})]})},Et=a(342),Rt=a(343),Mt=a(344),Vt=a(211),Bt=a.n(Vt),zt=a(212),Kt=a.n(zt),Yt=Object(D.a)((function(e){return Object(U.a)({img:{width:50,height:50},fab:{position:"relative",right:"50%",top:30,background:e.palette.secondary.light},header:{marginBottom:30},header_bar:{display:"flex",justifyContent:"flex-end"},chatIcon:{marginLeft:"-5%"}})})),qt=function(){var e=Object(r.useContext)(Y),t=e.globalState,a=e.dispatch,n=Yt(),c=Object(l.h)();return Object(f.jsx)(Et.a,{className:n.header,color:"primary",position:"static",children:Object(f.jsxs)(Rt.a,{className:n.header_bar,children:[Object(f.jsx)(Mt.a,{className:n.fab,children:Object(f.jsx)("img",{className:n.img,src:"data:image/png;base64,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",alt:"pointing poker"})}),"/"!==c.pathname&&Object(f.jsx)(E.a,{className:n.chatIcon,color:"secondary",onClick:function(){a({type:ee,payLoad:void 0})},children:t.chatOpen?Object(f.jsx)(Kt.a,{}):Object(f.jsx)(Bt.a,{})})]})})},Ht=a(345),Qt=a(346),Jt=a(353),Wt=function(e){var t=e.label,a=e.toggle,r=e.value;return Object(f.jsx)(Ht.a,{children:Object(f.jsx)(Qt.a,{control:Object(f.jsx)(Jt.a,{color:"primary",size:"medium",checked:r}),label:t,onClick:function(){return a(!r)},labelPlacement:"start"})})},Xt=Object(D.a)((function(e){return Object(U.a)({root:{minWidth:250,width:250,boxShadow:"0px 4px 4px rgba(0, 0, 0, 0.25)",marginBottom:10},cardContainer:{position:"relative",padding:0,paddingLeft:5},title:{lineHeight:1,wordWrap:"break-word"},current:{background:e.palette.secondary.main}})})),Zt=function(e){var t=e.text,a=e.current,r=Xt();return Object(f.jsx)(k.a,{className:Object(I.default)(r.root,Object(Ve.a)({},r.current,a)),variant:"outlined",children:Object(f.jsx)(rt.a,{className:r.cardContainer,children:Object(f.jsx)(P.a,{variant:"h6",className:r.title,children:t})})})},$t="https://fast-reaches-40751.herokuapp.com/",ea=a(72),ta=a.n(ea),aa=function(e){var t=e.message,a=e.currentUserID,r=t.text,n=t.user,c=a===n.userID;return Object(f.jsxs)("div",{className:ta.a.chat__message,children:[Object(f.jsx)(Zt,{text:r,current:c}),Object(f.jsx)(He,{name:"".concat(n.firstName," ").concat(n.lastName),initials:"".concat(n.firstName[0]).concat((n.lastName||"")[0]),jobPosition:n.jobPosition?n.jobPosition:"",imgSrc:$t+n.imgSrc,userID:n.userID,currentUser:c,roleInGame:n.roleInGame,size:"large"})]})},ra=a(143),na=a(213),ca=a.n(na),sa=Object(D.a)((function(){return{button:{margin:" 5px"}}})),ia=function(){var e=sa(),t=Object(r.useContext)(Y).globalState,a=Object(r.useState)(""),n=Object(o.a)(a,2),c=n[0],s=n[1],i=t.ws.provider,l=function(){i&&(i.sendChatMessage(c),s(""))};return Object(f.jsxs)(T.a,{className:ta.a.chat__input,children:[Object(f.jsx)(T.a,{sx:{flexGrow:1},children:Object(f.jsx)(ra.a,{fullWidth:!0,id:"outlined-textarea",multiline:!0,onKeyPress:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||l()},onChange:function(e){s(e.target.value)},value:c,disabled:!t.ws.status})}),Object(f.jsx)(T.a,{children:Object(f.jsx)(G.a,{type:"submit",variant:"contained",color:"primary",className:e.button,endIcon:Object(f.jsx)(ca.a,{}),disabled:!t.ws.status,onClick:function(){return l()},children:"Send"})})]})},oa=function(){var e=Object(r.useContext)(Y).globalState,t=n.a.useRef(null);return Object(r.useEffect)((function(){e.game.chatMessages.length>0&&t.current&&(t.current.scrollTop=t.current.scrollHeight)}),[e.game.chatMessages]),Object(f.jsxs)("div",{className:ta.a.chat,children:[Object(f.jsx)("div",{ref:t,className:ta.a.chat__messages_container,children:e.game.chatMessages.map((function(t){return Object(f.jsx)(aa,{message:t,currentUserID:e.currentUser.userID},t.id)}))}),Object(f.jsx)(ia,{})]})},la=function(e){var t=e.classNames,a=Object(r.useContext)(Y).globalState,n=a.game.issues;return Object(f.jsxs)("div",{className:t,children:[n.map((function(e){var t=e.name,a=e.priority,r=e.current,n=e.dealer,c=e.id;return Object(f.jsx)(Gt,{name:t,priority:a,current:r,dealer:n,id:c},c)})),"dealer"===a.currentUser.roleInGame&&Object(f.jsx)(ne,{})]})},ua=function(){var e=Object(r.useContext)(Y),t=e.globalState,a=e.dispatch,n=Object(r.useState)({value:"",id:(new Date).getTime().toString(36)+Math.random().toString(36).slice(2)}),c=Object(o.a)(n,2),s=c[0],i=c[1],l=function(){var e=Object(N.a)(S.a.mark((function e(r){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault(),a({type:te,payLoad:{property:"cards",value:[].concat(Object(Be.a)(t.temporaryDialerSettings.cards),[s])}}),a({type:$,payLoad:""});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:l,className:xe.a.modal,children:[Object(f.jsxs)("div",{className:xe.a.registration,children:[Object(f.jsx)("div",{className:xe.a.top,children:Object(f.jsx)("h2",{children:"Create Card"})}),Object(f.jsx)("div",{className:xe.a.inputs,children:Object(f.jsxs)(me.a,{htmlFor:"value",children:["Value:",Object(f.jsx)(he.a,{required:!0,value:s.value,onChange:function(e){return i(Object(C.a)(Object(C.a)({},s),{},{value:e.target.value}))},id:"filled-error-helper-text",type:"text",name:"value",variant:"outlined"})]})})]}),Object(f.jsxs)("div",{className:xe.a.buttons,children:[Object(f.jsx)(be.a,{color:"primary",className:xe.a.btn,type:"submit",variant:"contained",children:"Confirm"}),Object(f.jsx)(be.a,{color:"primary",className:xe.a.btn,variant:"outlined",onClick:function(){return a({type:$,payLoad:""})},children:"Cancel"})]})]})},da=a(214),ba=a.n(da),ja=function(){var e=Object(l.g)(),t=Object(r.useContext)(Y).globalState,a=Object(r.useState)(!1),n=Object(o.a)(a,2),c=n[0],s=n[1],i=Object(r.useState)(!1),u=Object(o.a)(i,2),d=u[0],b=u[1];return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(G.a,{disabled:!t.ws.status,color:"primary",variant:"outlined",onClick:function(){var e;null===(e=t.ws.provider)||void 0===e||e.changeValueOfGameProperty("status","canceled"),s(!0),b(!0)},children:"cancel game"}),Object(f.jsx)(y.a,{open:c,onClose:function(){s(!1),e.push("/")},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)("div",{className:ba.a.cancelAlert,children:Object(f.jsx)(A.a,{in:d,children:Object(f.jsx)(V.a,{action:Object(f.jsx)(E.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){b(!1),e.push("/")},children:Object(f.jsx)(M.a,{fontSize:"inherit"})}),children:"The game was canceled"})})})})]})},ma=a(146),pa=a(145),ha=a(149),Oa=a(75),xa=a.n(Oa),va=function(e){var t=e.handler,a=Object(r.useState)({minutes:1,seconds:20}),n=Object(o.a)(a,2),c=n[0],s=n[1],i=Object(r.useMemo)((function(){return{minutesMap:Array.from(Array(60).keys()),secondsMap:Array.from(Array(6).keys()).map((function(e){return 10*e}))}}),[]);return Object(f.jsxs)("div",{className:xa.a.timer,children:[Object(f.jsx)(me.a,{id:"minutes",children:"minutes"}),Object(f.jsx)(bt.a,{labelId:"minutes",id:"demo-simple-select",value:c.minutes,onChange:function(e){s(Object(C.a)(Object(C.a)({},c),{},{minutes:e.target.value})),t(60*e.target.value+c.seconds)},children:i.minutesMap.map((function(e){return Object(f.jsx)(ut.a,{value:e,children:e},e)}))}),Object(f.jsx)(me.a,{id:"seconds",children:"seconds"}),Object(f.jsx)(bt.a,{labelId:"seconds",id:"demo-simple-select",value:c.seconds,label:"",onChange:function(e){s(Object(C.a)(Object(C.a)({},c),{},{seconds:e.target.value})),t(60*c.minutes+e.target.value)},children:i.secondsMap.map((function(e){return Object(f.jsx)(ut.a,{value:e,children:e},e)}))})]})},fa=Object(D.a)((function(e){return Object(U.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})})),ga=function(){var e=Object(r.useContext)(Y).dispatch,t=Object(r.useState)({timer:120,dealerIsPlaying:!0,scoreType:"Story Point",shortScoreType:"SP",isTimerNeeded:!1,changingCardInRoundEnd:!1,cardsDeckType:"fibonacci",freeGameEnter:!1}),a=Object(o.a)(t,2),n=a[0],c=a[1],s=fa();Object(r.useEffect)((function(){e({type:te,payLoad:{property:"gameSettings",value:n}})}),[n,e]);var i=[{value:n.dealerIsPlaying,label:"Scrum master as player:",callback:function(e){return c(Object(C.a)(Object(C.a)({},n),{},{dealerIsPlaying:e}))}},{value:n.isTimerNeeded,label:" Is timer needed:",callback:function(e){return c(Object(C.a)(Object(C.a)({},n),{},{isTimerNeeded:e}))}},{value:n.changingCardInRoundEnd,label:"Changing card in round end:",callback:function(e){return c(Object(C.a)(Object(C.a)({},n),{},{changingCardInRoundEnd:e}))}},{value:n.freeGameEnter,label:"Allow new members to join:",callback:function(e){return c(Object(C.a)(Object(C.a)({},n),{},{freeGameEnter:e}))}}],l=[{value:n.scoreType,label:"Score type:",callback:function(e){c(Object(C.a)(Object(C.a)({},n),{},{scoreType:e.target.value}))}},{value:n.shortScoreType,label:"Score type (Short):",callback:function(e){c(Object(C.a)(Object(C.a)({},n),{},{shortScoreType:e.target.value}))}}];return Object(f.jsxs)("div",{className:xa.a.settings__wrap,children:[i.map((function(e){var t=e.value,a=e.label,r=e.callback;return Object(f.jsxs)("div",{className:xa.a.label,children:[a,Object(f.jsx)(Wt,{label:"",value:t,toggle:r})]},a)})),Object(f.jsxs)(ma.a,{className:s.formControl,children:[Object(f.jsx)(pa.a,{id:"demo-simple-select-label",children:"Cards Deck"}),Object(f.jsxs)(ha.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n.cardsDeckType,onChange:function(e){c(Object(C.a)(Object(C.a)({},n),{},{cardsDeckType:e.target.value}))},children:[Object(f.jsx)(se.a,{value:"fibonacci",children:"Fibonacci Sequence"}),Object(f.jsx)(se.a,{value:"powersOfTwo",children:"Powers of Two"}),Object(f.jsx)(se.a,{value:"custom",children:"Create your deck"})]})]}),l.map((function(e){var t=e.value,a=e.label,r=e.callback;return Object(f.jsxs)("div",{className:xa.a.label,children:[a,Object(f.jsx)(he.a,{fullWidth:!0,id:"outlined-basic",variant:"outlined",value:t,onChange:r})]},a)})),n.isTimerNeeded&&Object(f.jsxs)("div",{className:xa.a.label,children:["Round time:",Object(f.jsx)(va,{handler:function(e){c(Object(C.a)(Object(C.a)({},n),{},{timer:e}))}})]})]})},_a=a(215),ya=a.n(_a),ka=a(154),Ca=a.n(ka),wa=function(){var e=Object(r.useContext)(Y).globalState,t=Object(r.useState)(""),a=Object(o.a)(t,2),n=a[0],c=a[1],s=Object(r.useState)(!1),i=Object(o.a)(s,2),l=i[0],u=i[1],d=function(){var t;l&&(null===(t=e.ws.provider)||void 0===t||t.changeValueOfGameProperty("title",n)),u(!l)};return Object(r.useEffect)((function(){c(e.game.title)}),[e]),Object(f.jsxs)("div",{className:Ca.a.gameInfo,children:[l&&Object(f.jsx)(Ze.a,{required:!0,value:n,onChange:function(e){return c(e.target.value)},id:"filled-error-helper-text",type:"text",variant:"outlined",onKeyPress:function(e){"Enter"!==e.key&&"NumpadEnter"!==e.key||d()}}),!l&&Object(f.jsx)("h4",{children:n}),"dealer"===e.currentUser.roleInGame&&e.ws.status&&Object(f.jsx)(ya.a,{className:Ca.a.icon,onClick:function(){return d()}})]})},Sa=a(216),Na=a.n(Sa),Ia=a(90),Da=a.n(Ia),Ua=function(){var e,t=Object(r.useContext)(Y),a=t.globalState,n=t.dispatch,c=a.temporaryDialerSettings.cards,s=a.temporaryDialerSettings.gameSettings,i=s.shortScoreType,o=s.cardsDeckType;switch(o){default:e=p;break;case"powersOfTwo":e=h;break;case"custom":e=c}return Object(f.jsxs)("div",{className:Da.a.cards__cardField,children:[e.map((function(e){var t=e.value,a=e.id;return Object(f.jsx)(_e,{value:t,scoreType:i||"",isEditable:"custom"===o,isActiveCard:!1,id:a},a)})),"custom"===o&&Object(f.jsx)("div",{role:"presentation",onClick:function(){return n({type:$,payLoad:"createCard"})},children:Object(f.jsx)(L.a,{elevation:3,className:Da.a.card,children:Object(f.jsx)(Na.a,{className:Da.a.plus})})})]})},Fa=function(){return Object(f.jsx)("div",{className:Da.a.cards__cardField,children:O.map((function(e){return Object(f.jsx)(ye,{back:e.class},e.id)}))})},Pa=a(155),Ga=a.n(Pa),La=function(){var e=Object(r.useContext)(Y).globalState,t=e.game.users.find((function(e){return"dealer"===e.roleInGame}));if(!t)return Object(f.jsxs)("div",{className:Ga.a.scrumMaster,children:[Object(f.jsx)(P.a,{children:"Scrum master:"}),"Loading..."]});var a=t.initials,n=t.firstName,c=t.lastName,s=t.jobPosition,i=t.userID,o=t.roleInGame,l=t.imgSrc;return Object(f.jsxs)("div",{className:Ga.a.scrumMaster,children:[Object(f.jsx)(P.a,{children:"Scrum master:"}),Object(f.jsx)(He,{initials:a,name:"".concat(n," ").concat(c),jobPosition:s||"",userID:i,currentUser:i===e.currentUser.userID,roleInGame:o,size:"large",imgSrc:$t+l})]})},Ta=a(218),Aa=a.n(Ta),Ea=a(217),Ra=a.n(Ea),Ma=function(){var e=Object(r.useContext)(Y).globalState,t="".concat(window.location.origin,"/").concat(e.game.gameID);return Object(f.jsx)("div",{className:Ra.a.linkToLobby,children:Object(f.jsx)(F.a,{container:!0,children:Object(f.jsx)(F.a,{item:!0,xs:12,children:Object(f.jsx)(Ze.a,{id:"outlined-read-only-input",label:"Link to lobby",fullWidth:!0,defaultValue:t,InputProps:{readOnly:!0,endAdornment:Object(f.jsx)(G.a,{color:"primary",variant:"contained",onClick:function(){navigator.clipboard.writeText(t)},endIcon:Object(f.jsx)(Aa.a,{}),children:"Copy"})}})})})})},Va=function(){var e=Object(r.useContext)(Y).globalState,t=Object(l.g)(),a=[];switch(e.temporaryDialerSettings.gameSettings.cardsDeckType){default:a=p;break;case"powersOfTwo":a=h;break;case"custom":a=e.temporaryDialerSettings.cards}var n=function(){var r=Object(N.a)(S.a.mark((function r(){var n,c;return S.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=null===(n=e.ws.provider)||void 0===n?void 0:n.changeValueOfGameProperty.bind(e.ws.provider)){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,c("gameSettings",e.temporaryDialerSettings.gameSettings);case 5:return r.next=7,c("cards",a);case 7:return r.next=9,c("cartBackClass",e.temporaryDialerSettings.cartBackClass);case 9:return r.next=11,c("selectedCards",e.game.users.map((function(e){return{card:void 0,user:e}})));case 11:return r.next=13,c("status","pending");case 13:t.push("/".concat(e.game.gameID,"/game"));case 14:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(f.jsx)(be.a,{disabled:!e.ws.status,color:"primary",variant:"contained",onClick:n,children:"start game"})},Ba=function(e){var t=e.classNames,a=Object(r.useContext)(Y).globalState,n=a.game.users.filter((function(e){return"dealer"!==e.roleInGame}));return Object(f.jsx)("div",{className:t,children:n.map((function(e){var t=e.firstName,r=e.lastName,n=e.jobPosition,c=e.userID,s=e.imgSrc,i=e.initials,o=e.roleInGame;return Object(f.jsx)(He,{initials:i,name:"".concat(t," ").concat(r),jobPosition:n||"",userID:c,currentUser:c===a.currentUser.userID,size:"large",roleInGame:o,imgSrc:$t+s},c)}))})},za=a(347),Ka=a(100),Ya=a.n(Ka);function qa(e){return Ha.apply(this,arguments)}function Ha(){return(Ha=Object(N.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("\u043d\u0435\u0442 ID");case 2:return e.prev=2,e.next=5,Ya.a.get("".concat($t,"game/").concat(t));case 5:if(200!==(a=e.sent).status){e.next=8;break}return e.abrupt("return",a.data);case 8:return e.abrupt("return",void 0);case 11:return e.prev=11,e.t0=e.catch(2),e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}var Qa=function(){var e=Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ya.a.post("".concat($t,"game"));case 3:if(200!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",t.data);case 6:return console.log("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441o\u0437\u0434\u0430\u043d\u0438\u044f \u0438\u0433\u0440\u044b \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0435 "),e.abrupt("return",void 0);case 10:return e.prev=10,e.t0=e.catch(0),console.log("\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c , "),e.abrupt("return",void 0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Ja=Object(D.a)((function(e){return Object(U.a)({root:{width:276,height:47,"& > *":{margin:e.spacing(0)}},input:{display:"none"}})})),Wa=function(e){var t=e.setImage,a=Ja();return Object(f.jsx)("div",{className:a.root,children:Object(f.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(f.jsx)("input",{accept:"image/*",id:"contained-button-file",type:"file",className:a.input,onChange:function(e){return function(e){e.target.files&&t(e.target.files[0])}(e)}}),Object(f.jsx)(G.a,{variant:"contained",color:"primary",component:"span",children:"Upload"})]})})};function Xa(e){return Za.apply(this,arguments)}function Za(){return(Za=Object(N.a)(S.a.mark((function e(t){var a,r,n,c,s,i,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.firstName,r=t.lastName,n=t.roleInGame,c=t.jobPosition,s=t.avatar,(i=new FormData).append("userConfig",JSON.stringify({firstName:a,lastName:r,jobPosition:c,roleInGame:n})),s&&i.append("avatar",s),e.prev=4,e.next=7,Ya()({method:"post",url:"".concat($t,"player/"),data:i,headers:{"Content-Type":"multipart/form-data"}});case 7:return o=e.sent,e.abrupt("return",o.data);case 11:return e.prev=11,e.t0=e.catch(4),console.log(e.t0.response.data),e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}var $a=function(e){var t=e.label,a=e.setObserver,r=e.isObserver;return Object(f.jsx)(Ht.a,{children:Object(f.jsx)(Qt.a,{control:Object(f.jsx)(Jt.a,{color:"primary",size:"medium",checked:r}),label:t,onClick:function(){return a(!r)},labelPlacement:"start"})})},er=a(47),tr=a.n(er),ar=function(e){var t=e.setOpen,a=e.isDealer,n=Object(r.useState)(""),c=Object(o.a)(n,2),s=c[0],i=c[1],u=Object(r.useState)(""),d=Object(o.a)(u,2),b=d[0],j=d[1],m=Object(r.useState)(""),p=Object(o.a)(m,2),h=p[0],O=p[1],x=Object(r.useState)(!1),v=Object(o.a)(x,2),g=v[0],_=v[1],y=Object(r.useState)(),k=Object(o.a)(y,2),C=k[0],w=k[1],I=Object(l.g)(),D=Object(r.useState)(!1),U=Object(o.a)(D,2),P=U[0],L=U[1],T=Object(r.useContext)(Y),A=T.dispatch,E=T.globalState,R=function(){var e=Object(N.a)(S.a.mark((function e(t){var r,n,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),e.t0=!0,e.next=e.t0===a?4:e.t0===g?6:8;break;case 4:return r="dealer",e.abrupt("break",9);case 6:return r="observer",e.abrupt("break",9);case 8:r="player";case 9:if(""===s.trim()){e.next=20;break}return n={firstName:s,lastName:b,jobPosition:h,roleInGame:r,avatar:C},L(!0),e.next=14,Xa(n);case 14:if(c=e.sent,L(!1),null===c||void 0===c?void 0:c.userID){e.next=18;break}return e.abrupt("return");case 18:A({type:X,payLoad:c}),I.push("/".concat(E.game.gameID,"/lobby"));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=[{label:"Your first name:",required:!0,value:s,onChange:i,name:"firstName"},{label:"Your last name:",required:!1,value:b,onChange:j,name:"lastName"},{label:"Your job position:",required:!1,value:h,onChange:O,name:"job"}];return Object(f.jsxs)("form",{onSubmit:R,className:tr.a.modal,children:[Object(f.jsxs)("div",{className:tr.a.registration,children:[Object(f.jsxs)("div",{className:tr.a.top,children:[Object(f.jsx)("h2",{children:"Connect to lobby"}),!a&&Object(f.jsx)("div",{className:tr.a.SwitchContainer,children:Object(f.jsx)($a,{label:"Connect as Observer",setObserver:_,isObserver:g})})]}),Object(f.jsxs)(F.a,{container:!0,className:tr.a.inputs,spacing:3,children:[M.map((function(e){var t=e.label,a=e.required,r=e.value,n=e.onChange,c=e.name;return Object(f.jsx)(F.a,{item:!0,children:Object(f.jsxs)(pa.a,{htmlFor:c,children:[t,Object(f.jsx)(Ze.a,{required:a,value:r,onChange:function(e){return n(e.target.value)},id:"filled-error-helper-text",type:"text",name:c,variant:"outlined",inputProps:{maxLength:10}})]})},c)})),Object(f.jsxs)(F.a,{item:!0,className:tr.a.upload,children:[Object(f.jsx)("p",{children:"Image:"}),Object(f.jsx)("div",{className:tr.a.upload__buttons,children:Object(f.jsx)(Wa,{setImage:w})}),Object(f.jsx)(ze.a,{src:C?URL.createObjectURL(C):"/broken-image.jpg",children:s&&b?"".concat(s[0]).concat(b[0]):null})]})]})]}),Object(f.jsxs)("div",{className:tr.a.buttons,children:[Object(f.jsx)(G.a,{disabled:P,color:"primary",className:tr.a.btn,type:"submit",variant:"contained",children:P?Object(f.jsx)(za.a,{}):"Confirm"}),Object(f.jsx)(G.a,{color:"primary",className:tr.a.btn,variant:"outlined",onClick:function(){return t(!1)},children:"Cancel"})]})]})},rr=a(101),nr=a.n(rr),cr=function(e){var t=e.open,a=e.setOpen,n=e.setIsDealer,c=e.isDealer,s=e.id,i=Object(r.useState)(""),u=Object(o.a)(i,2),d=u[0],b=u[1],j=Object(r.useState)(!1),m=Object(o.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(!1),x=Object(o.a)(O,2),v=x[0],g=x[1],_=Object(r.useContext)(Y).dispatch,k=Object(l.g)(),C=d.substring(d.lastIndexOf("/")+1),w=Object(r.useCallback)(Object(N.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return g(!0),e.next=5,qa(s);case 5:t=e.sent,g(!1),t?(_({type:Z,payLoad:t}),a(!0),n(!1)):(h(!0),setTimeout((function(){h(!1)}),2e3));case 8:case"end":return e.stop()}}),e)}))),[_,n,a,s]),I=function(){var e=Object(N.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),k.push(C);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s&&w()}),[s,w]),Object(f.jsxs)("form",{onSubmit:I,className:nr.a.connect,children:[Object(f.jsxs)("p",{children:["Connect to lobby by ",Object(f.jsx)("span",{className:nr.a.highlight,children:"URL"}),":"]}),Object(f.jsxs)("div",{className:nr.a.connect__control,children:[Object(f.jsx)(Ze.a,{error:p,required:!0,id:"filled-error-helper-text",value:d,onChange:function(e){return b(e.target.value)},type:"text",helperText:p?"invalid URL":"",variant:"outlined"}),Object(f.jsx)(G.a,{className:nr.a.btn,color:"primary",variant:"contained",type:"submit",disabled:v,children:v?Object(f.jsx)(za.a,{}):"Connect"}),Object(f.jsx)(y.a,{open:t,onClose:function(){return a(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(f.jsx)("div",{children:Object(f.jsx)(ar,{isDealer:c,setOpen:a})})})]})]})},sr=a(219),ir=a.n(sr),or=function(e){var t=e.setOpen,a=e.setIsDealer,n=Object(r.useContext)(Y).dispatch,c=Object(r.useState)(!1),s=Object(o.a)(c,2),i=s[0],l=s[1],u=function(){var e=Object(N.a)(S.a.mark((function e(){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,Qa();case 3:if(r=e.sent,l(!1),r){e.next=7;break}return e.abrupt("return");case 7:n({type:Z,payLoad:r}),t(!0),a(!0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:ir.a.new_session,children:[Object(f.jsx)("p",{children:"Create session:"}),Object(f.jsx)(G.a,{color:"primary",variant:"contained",onClick:u,disabled:i,children:i?Object(f.jsx)(za.a,{}):"Start new game"})]})},lr=a(78),ur=a.n(lr),dr=function(){var e,t,a=Object(r.useContext)(Y).globalState,n=function(){var e=Object(N.a)(S.a.mark((function e(t){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),null===(r=a.ws.provider)||void 0===r||r.sendVote(!0);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("form",{onSubmit:n,className:ur.a.modal,children:[Object(f.jsx)("div",{className:ur.a.registration,children:Object(f.jsx)("div",{className:ur.a.top,children:Object(f.jsx)("h2",{children:"Vote"})})}),Object(f.jsx)("h4",{children:"user ".concat(null===(e=a.game.vote)||void 0===e?void 0:e.author.firstName,"\n             prompts to kick out  ").concat(null===(t=a.game.users.find((function(e){var t;return e.userID===(null===(t=a.game.vote)||void 0===t?void 0:t.kickID)})))||void 0===t?void 0:t.firstName)}),Object(f.jsxs)("div",{className:ur.a.buttons,children:[Object(f.jsx)(be.a,{color:"primary",className:ur.a.btn,type:"submit",variant:"contained",children:"Kick user"}),Object(f.jsx)(be.a,{color:"primary",className:ur.a.btn,variant:"outlined",onClick:function(){var e;return null===(e=a.ws.provider)||void 0===e?void 0:e.sendVote(!1)},children:"Don ' t kick"})]})]})},br="userConnection",jr="chatMessage",mr="setGameState";function pr(e,t){var a=e.game,r=a.users,n=a.chatMessages;switch(t.type){case q:var c=t.payLoad;return n.filter((function(e){return e.id!==c.id})).length<0?e:Object(C.a)(Object(C.a)({},e),{},{game:Object(C.a)(Object(C.a)({},e.game),{},{chatMessages:[].concat(Object(Be.a)(n),[c])})});case H:var s=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{ws:Object(C.a)(Object(C.a)({},e.ws),{},{socket:s})});case Q:var i=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{ws:Object(C.a)(Object(C.a)({},e.ws),{},{status:i})});case J:var o=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{ws:Object(C.a)(Object(C.a)({},e.ws),{},{provider:o})});case Z:var l=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{game:Object(C.a)(Object(C.a)({},e.game),l)});case W:var u=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{game:Object(C.a)(Object(C.a)({},e.game),u)});case X:var d=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{currentUser:d});case br:var b=t.payLoad;return"new"===e.game.status&&e.game.users.every((function(e){return e.userID!==b.userID}))?Object(C.a)(Object(C.a)({},e),{},{game:Object(C.a)(Object(C.a)({},e.game),{},{users:[].concat(Object(Be.a)(r),[b])})}):Object(C.a)({},e);case $:var j=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{popup:j});case"setGameSettings":var m=t.payLoad;return Object(C.a)(Object(C.a)({},e),{},{game:Object(C.a)(Object(C.a)({},e.game),{},{gameSettings:m})});case ee:var p=!e.chatOpen;return Object(C.a)(Object(C.a)({},e),{},{chatOpen:p});case te:switch(t.payLoad.property){case"gameSettings":var h=t.payLoad.value;return Object(C.a)(Object(C.a)({},e),{},{temporaryDialerSettings:Object(C.a)(Object(C.a)({},e.temporaryDialerSettings),{},{gameSettings:h})});case"cards":var O=t.payLoad.value;return Object(C.a)(Object(C.a)({},e),{},{temporaryDialerSettings:Object(C.a)(Object(C.a)({},e.temporaryDialerSettings),{},{cards:O})});case"cartBackClass":var x=t.payLoad.value;return Object(C.a)(Object(C.a)({},e),{},{temporaryDialerSettings:Object(C.a)(Object(C.a)({},e.temporaryDialerSettings),{},{cartBackClass:x})});default:return Object(C.a)({},e)}default:throw new Error("unknown action")}}var hr=a(220),Or=a(221);function xr(e,t){switch(e.event){case"initMessage":if(!e.game)return;t({type:W,payLoad:e.game});break;case br:if(!e.user)return;t({type:br,payLoad:e.user});break;case jr:if(!e.chatMessage)return;t({type:q,payLoad:e.chatMessage});break;case mr:if(!e.game)return;t({type:W,payLoad:Object(C.a)(Object(C.a)({},e.game),{},Object(Ve.a)({},"".concat(e.gameProperty),e.value))})}}var vr=function(){function e(t){Object(hr.a)(this,e),this.globalDispatch=void 0,this.currentUser=void 0,this.game=void 0,this.socket=void 0,this.currentUser=void 0,this.game=void 0,this.globalDispatch=t}return Object(Or.a)(e,[{key:"connects",value:function(){var e=Object(N.a)(S.a.mark((function e(){var t,a,r=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="ws://".concat($t.split("://")[1],"ws"),e.prev=1,null===(a=this.game)||void 0===a?void 0:a.gameID){e.next=4;break}throw new Error("\u043d\u0435\u0442 gameID");case 4:this.socket=new WebSocket(t),this.socket.onopen=Object(N.a)(S.a.mark((function e(){var t,a,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(t=r.game)||void 0===t?void 0:t.gameID)&&r.currentUser){e.next=2;break}return e.abrupt("return");case 2:if(n={user:r.currentUser,gameID:r.game.gameID,event:br},r.globalDispatch({type:Q,payLoad:!0}),r.socket){e.next=6;break}throw new Error;case 6:return e.next=8,null===(a=r.socket)||void 0===a?void 0:a.send(JSON.stringify(n));case 8:case"end":return e.stop()}}),e)}))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u043e\u043c");case 11:if(this.socket){e.next=13;break}return e.abrupt("return");case 13:this.globalDispatch({type:H,payLoad:this.socket}),this.socket.onclose=function(){r.globalDispatch({type:Q,payLoad:!1}),setTimeout((function(){r.connects()}),5e3)},this.socket.onmessage=function(e){if(r.currentUser){var t={user:r.currentUser,gameID:"",event:"userConnection"};try{t=JSON.parse(e.data)}catch(a){console.log(e.data,"  ",a)}xr(t,r.globalDispatch)}};case 16:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(N.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.socket){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.socket.send(JSON.stringify(t));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438",e.t0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendChatMessage",value:function(){var e=Object(N.a)(S.a.mark((function e(t){var a,r,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(a=this.game)||void 0===a?void 0:a.gameID)&&this.currentUser){e.next=2;break}return e.abrupt("return");case 2:return r={user:this.currentUser,text:t,id:(new Date).getTime().toString(36)+Math.random().toString(36).slice(2),date:new Date},n={gameID:this.game.gameID,user:this.currentUser,event:jr,chatMessage:r},e.next=6,this.send(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateProviderState",value:function(e){this.currentUser=e.currentUser,this.game=e.game}},{key:"changeValueOfGameProperty",value:function(){var e=Object(N.a)(S.a.mark((function e(t,a){var r,n,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(r=this.game)||void 0===r?void 0:r.gameID)&&this.currentUser){e.next=2;break}return e.abrupt("return");case 2:if(n=Object.keys(this.game),e.prev=3,n.includes(t)){e.next=6;break}throw new Error("\u043d\u0435\u0442 \u0442\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044f \u0443 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0438\u0433\u0440\u044b");case 6:return c={gameID:this.game.gameID,user:this.currentUser,event:mr,gameProperty:t,value:a},e.next=9,this.send(c);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438",e.t0);case 14:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"sendVote",value:function(){var e=Object(N.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(a=this.game)||void 0===a?void 0:a.gameID)&&this.currentUser){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this.game.vote){e.next=5;break}throw new Error("\u043d\u0435\u0442 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043d\u0438\u044f");case 5:return r={gameID:this.game.gameID,user:this.currentUser,event:"vote",vote:t},e.next=8,this.send(r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438",e.t0);case 13:case"end":return e.stop()}}),e,this,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"sendChooseCard",value:function(){var e=Object(N.a)(S.a.mark((function e(t){var a,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===(a=this.game)||void 0===a?void 0:a.gameID)&&this.currentUser){e.next=2;break}return e.abrupt("return");case 2:if("going"===this.game.round.status){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,r={gameID:this.game.gameID,user:this.currentUser,event:"chooseCard",card:t},e.next=8,this.send(r);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438",e.t0);case 13:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),fr=a(222),gr=a.n(fr),_r=Object(u.a)({palette:{primary:{light:"#428e92",main:"#006064",dark:"#00363a"},secondary:{light:"#dbffff",main:"#a7ffeb",dark:"#75ccb9"}}}),yr=function(){var e=Object(r.useReducer)(pr,K),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(r.useEffect)((function(){var e=new vr(n);n({type:J,payLoad:e})}),[n]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(Y.Provider,{value:{dispatch:n,globalState:a},children:Object(f.jsxs)(d.a,{theme:_r,children:[Object(f.jsx)(qt,{}),Object(f.jsxs)("main",{className:gr.a.content,children:[Object(f.jsxs)(l.d,{children:[Object(f.jsx)(l.b,{exact:!0,path:"/",children:Object(f.jsx)(Ct,{})}),Object(f.jsx)(l.b,{path:"/:id",children:Object(f.jsx)(At,{})})]}),a.chatOpen&&Object(f.jsx)(oa,{})]}),Object(f.jsx)(_,{})]})})})};a(302);s.a.render(Object(f.jsx)(i.a,{children:Object(f.jsx)(yr,{})}),document.getElementById("root"))},31:function(e,t,a){e.exports={modal:"CardAddForm_modal__j8xqS",buttons:"CardAddForm_buttons__2PENk",top:"CardAddForm_top__3Uv9K",registration:"CardAddForm_registration__1-k0E",inputs:"CardAddForm_inputs__18mN6",btn:"CardAddForm_btn__1yoE5",upload:"CardAddForm_upload__3H6-v",upload__buttons:"CardAddForm_upload__buttons__U4OwQ",SwitchContainer:"CardAddForm_SwitchContainer__1PDrS"}},36:function(e,t,a){e.exports={lobby:"Lobby_lobby__2bLYe",container:"Lobby_container__2k9q6",top:"Lobby_top__2ur87",top__buttons:"Lobby_top__buttons__2nHcw",exitField:"Lobby_exitField__x7ZDV",exitBtn:"Lobby_exitBtn__3zf2S",members:"Lobby_members__3vlCH",issues:"Lobby_issues__3nEax",cards:"Lobby_cards__knFUE",members__cardField:"Lobby_members__cardField__3VvIE",issues__cardField:"Lobby_issues__cardField__18j9b",cards__cardField:"Lobby_cards__cardField__3ZzAb",settings:"Lobby_settings__33C6K",modal:"Lobby_modal__1EVEB"}},47:function(e,t,a){e.exports={modal:"RegistrationForm_modal__5vwnf",buttons:"RegistrationForm_buttons__2Nts6",top:"RegistrationForm_top___78t5",registration:"RegistrationForm_registration__2Hf6M",inputs:"RegistrationForm_inputs__2jiGm",btn:"RegistrationForm_btn__3QMnn",upload:"RegistrationForm_upload__X-TyM",upload__buttons:"RegistrationForm_upload__buttons__1Qq74",SwitchContainer:"RegistrationForm_SwitchContainer__2vphp"}},55:function(e,t,a){e.exports={coffee:"statistic_coffee__2d4a6",demo:"statistic_demo__1mV5Q",card:"statistic_card__1ullL",container:"statistic_container__17UMu"}},67:function(e,t,a){e.exports={modal:"IssueCreateForm_modal__1dNBH",buttons:"IssueCreateForm_buttons__2HOAB",top:"IssueCreateForm_top__3nEZp",registration:"IssueCreateForm_registration__3GNGN",inputs:"IssueCreateForm_inputs__1OPSm",btn:"IssueCreateForm_btn__3Om2W",upload:"IssueCreateForm_upload__pzA7d",upload__buttons:"IssueCreateForm_upload__buttons__1gMV_",SwitchContainer:"IssueCreateForm_SwitchContainer__2P-mM"}},72:function(e,t,a){e.exports={chat:"chat_chat__36ypd",chat__messages_container:"chat_chat__messages_container__1j2lh",chat__message:"chat_chat__message__1wujI",chat__text:"chat_chat__text__FCUcy",chat__input:"chat_chat__input__o8P4O"}},73:function(e,t,a){e.exports={footer:"footer_footer__3SL1J",footerContainer:"footer_footerContainer__4gvlQ",github:"footer_github__3KL6t",rss:"footer_rss__2ujsD",rssYear:"footer_rssYear__2SRaV"}},75:function(e,t,a){e.exports={settings__wrap:"GameSettings_settings__wrap__38xAs",label:"GameSettings_label__1lt8c",timer:"GameSettings_timer__pMgRH"}},76:function(e,t,a){e.exports={modal:"LetInUserToGameForm_modal__1JVpE",buttons:"LetInUserToGameForm_buttons__2a5cg",top:"LetInUserToGameForm_top__1QR2r",registration:"LetInUserToGameForm_registration__2V7lK",inputs:"LetInUserToGameForm_inputs__1Rm1D",btn:"LetInUserToGameForm_btn__3Yq-y",upload:"LetInUserToGameForm_upload__ylziJ",upload__buttons:"LetInUserToGameForm_upload__buttons__E-W_6",SwitchContainer:"LetInUserToGameForm_SwitchContainer__MKnsu"}},77:function(e,t,a){e.exports={main_page:"MainPage_main_page__1xKJJ",container:"MainPage_container__2WZXv",poker_planning:"MainPage_poker_planning__1MSjm",content:"MainPage_content__1kGUD",center:"MainPage_center__3rYJm"}},78:function(e,t,a){e.exports={modal:"VoteForm_modal__2Jv0g",buttons:"VoteForm_buttons__10uHo",top:"VoteForm_top__26NBR",registration:"VoteForm_registration__39pVS",inputs:"VoteForm_inputs__35TVd",btn:"VoteForm_btn__3oco7",upload:"VoteForm_upload__g5Bb9",upload__buttons:"VoteForm_upload__buttons__1kkdZ",SwitchContainer:"VoteForm_SwitchContainer__1uuc_"}},90:function(e,t,a){e.exports={plus:"CardField_plus__agXTj",cards:"CardField_cards__24wJW",cards__cardField:"CardField_cards__cardField__Wvmd4",card:"CardField_card__3Z8F5",container:"CardField_container__1yOJB",header:"CardField_header__3rJna",menuBtn:"CardField_menuBtn__2QxcS",right:"CardField_right__2_Vk_",center:"CardField_center__2F0xv"}}},[[303,1,2]]]);
//# sourceMappingURL=main.379354ac.chunk.js.map